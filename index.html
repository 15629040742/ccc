<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>ECharts 手动控制曲线示例</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js"></script>
</head>

<body>
  <div id="chart" style="width: 600px; height: 400px;"></div>

  <script>
    // 初始化 ECharts 实例
    var myChart = echarts.init(document.getElementById('chart'));

    // 模拟一组数据
    var data = [];
    for (var i = 0; i <= 100; i++) {
      data.push(Math.sin(i / 5));
    }

    // 初始化曲率参数
    var curvature = 1;

    // 图表配置项
    var option = {
      xAxis: {
        type: 'category',
        data: data
      },
      yAxis: {
        type: 'value'
      },
      series: [{
        type: 'line',
        data: data,
        smooth: true, // 开启平滑曲线
        lineStyle: {
          curvature: 0.5 // 设置曲率参数
        }
      }]
    };

    // 设置图表配置项并渲染图表
    myChart.setOption(option);

    // 监听自定义事件 dragCurvature
    myChart.on('dragCurvature', function (params) {
      curvature = params.curvature;

      // 更新曲线的曲率参数
      myChart.setOption({
        series: [{
          lineStyle: {
            curvature: curvature
          }
        }]
      });
    });

    // 监听鼠标按下事件，开始拖动
    myChart.getZr().on('mousedown', function (params) {
      var event = params.event;

      // 记录鼠标按下时的坐标
      var startX = event.offsetX;

      // 监听鼠标移动事件，计算曲率参数并触发自定义事件 dragCurvature
      myChart.getZr().on('mousemove', function (params) {
        var event = params.event;

        // 计算鼠标移动的距离
        var moveX = event.offsetX - startX;

        // 根据鼠标移动的距离计算曲率参数的变化量
        var deltaCurvature = moveX / 1000; // 根据实际情况调整比例

        // 更新曲率参数
        curvature += deltaCurvature;

        // 触发自定义事件 dragCurvature，并传递曲率参数
        myChart.trigger('dragCurvature', {
          curvature: curvature
        });

        // 更新起始坐标
        startX = event.offsetX;
      });

      // 监听鼠标释放事件，停止拖动
      myChart.getZr().on('mouseup', function () {
        // 移除鼠标移动和释放事件的监听器
        myChart.getZr().off('mousemove');
        myChart.getZr().off('mouseup');
      });
    });
  </script>
</body>

</html>
